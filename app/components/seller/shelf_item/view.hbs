{{#component "on-off-shelf js-comp"}}
  <div class="component-header">
    <span class="component-title">
      {{#equals status "1"}}{{i18n "Listed products" bundle="all_mix"}}{{else}}{{i18n "Unlisted" bundle="all_mix"}}{{/equals}}
    </span>
  </div>
  <div class="component-body">
    <div class="search-item">
      <div id="block" class="block filter-block">
        <form class="form">
          <fieldset>
            <span class="span4">
              <label for="">{{i18n "Product" bundle="all_mix"}}ID&nbsp;&nbsp;
                <input type="text" class="item-filter-item" name="itemId" value="{{itemId}}" placeholder="{{i18n "Product Number (number)" bundle="all_mix"}}">
              </label>
            </span>
            <span class="span3">
              <label for="">&nbsp;&nbsp;{{i18n "Product Code" bundle="all_mix"}}&nbsp;&nbsp;
                <input type="text" class="item-filter-item" name="itemCode" value="{{itemCode}}" placeholder="{{i18n "Product Code" bundle="all_mix"}}">
              </label>
            </span>
            <span class="span3">
              <label for="">&nbsp;&nbsp;{{i18n "Product Name" bundle="all_mix"}}&nbsp;&nbsp;
                <input type="text" class="item-filter-item" name="itemName" value="{{itemName}}" placeholder="{{i18n "Product Name" bundle="all_mix"}}">
              </label>
            </span>
            <span class="span2 pull-right">
              <label for="filter">
                <button type="submit" class="btn btn-minor js-item-filter">搜索</button>
                &nbsp;
                <button type="button" class="btn btn-ghost js-filter-clear">重置</button>
              </label>
            </span>
          </fieldset>
        </form>
      </div>
    </div>
    <div class="item-list">
      <table class="table  item-manage-table">
        <thead>
          <tr>
            <th width="24"><input type="checkbox" class="js-batch-select input-checkbox" autocomplete="off"></th>
            <th width="286" class="left-text">
              {{i18n "Product" bundle="all_mix"}}
            </th>
            <th width="160">{{i18n "Product" bundle="all_mix"}}ID</th>
            <th width="160">{{i18n "Price" bundle="all_mix"}}</th>
            <th width="100">{{i18n "Inventory " bundle="all_mix"}}</th>
            <th width="60">{{i18n "Total sales" bundle="all_mix"}}</th>
            <th width="60">{{i18n "Status" bundle="all_mix"}}</th>
            <th width="110" class="td-operation">{{i18n "Operation " bundle="all_mix"}}</th>
          </tr>
        </thead>
        <tbody>
          {{#each _DATA_.data}}
          <tr data-id="{{id}}">
            <td>{{#equals status "-2"}}-{{else}}<input type="checkbox" class="js-item-select input-checkbox" autocomplete="off">{{/equals}}</td>
            <td class="left-text">
              <a href="/items/{{id}}" target="_blank">{{name}}</a><br>
            </td>
            <td>{{id}}</td>
            <td>
              <span class="currency">
                {{#equals lowPrice highPrice}}
                  {{formatPrice lowPrice}}
                {{else}}
                  {{formatPrice lowPrice}}-{{formatPrice highPrice}}
                {{/equals}}
              </span>
            </td>
            <td>{{stockQuantity}} {{extra.unit}}</td>
            <td>
              {{#equals _USER_.currentCategory 12}}
                －
              {{else}}
                {{#if saleQuantity}}{{saleQuantity}}{{else}}0{{/if}} {{extra.unit}}
              {{/equals}}
            </td>
            <td>
              {{#equals status "1"}}已上架{{/equals}}
              {{#equals status "-1"}}已下架{{/equals}}
              {{#equals status "0"}}未上架{{/equals}}
              {{#equals status "-2"}}{{i18n "frozen" bundle="all_mix"}}{{/equals}}
              {{#equals status "2"}}待审核{{/equals}}
              {{#equals status "-4"}}审核不通过{{/equals}}
            </td>
            <td class="td-operation">
              {{#withPerm "item_status_update"}}
                {{#equals status "1"}}<a href="javascript:void(0);" class="js-item-off" data-toggle="confirm" data-title="{{i18n "Are you sure to put it off shelves?" bundle="all_mix"}}" data-content="{{i18n "Can be on-shelf after off-shelf, confirm put it off shelves?" bundle="all_mix"}}" data-event="confirm:off-one">{{i18n "Unlist " bundle="all_mix"}}</a><br>{{/equals}}
                {{#equals status "-1"}}<a href="javascript:void(0);" class="js-item-on" data-toggle="confirm" data-title="{{i18n "Are you sure to put it on shelves?" bundle="all_mix"}}" data-content="{{i18n "Can be off-shelf after on-shelf, confirm put it on shelves?" bundle="all_mix"}}" data-event="confirm:on-one">{{i18n "List" bundle="all_mix"}}</a><br>{{/equals}}
                {{#equals status "0"}}<a href="javascript:void(0);" class="js-item-on" data-toggle="confirm" data-title="{{i18n "Are you sure to put it on shelves?" bundle="all_mix"}}" data-content="{{i18n "Can be off-shelf after on-shelf, confirm put it on shelves?" bundle="all_mix"}}" data-event="confirm:on-one">{{i18n "List" bundle="all_mix"}}</a><br>{{/equals}}
                {{#equals status "-4"}}<a href="javascript:void(0);" class="js-item-on" data-toggle="confirm" data-title="{{i18n "Are you sure to put it on shelves?" bundle="all_mix" ta="abc"}}" data-content="{{i18n "Can be off-shelf after on-shelf, confirm put it on shelves?" bundle="all_mix"}}" data-event="confirm:on-one">{{i18n "List" bundle="all_mix"}}</a><br>{{/equals}}
              {{/withPerm}}
              {{#withPerm "update_item"}}
                <a href="/seller/item-publish?itemId={{id}}&categoryPath={{urlEncode categoryPath "utf-8"}}" target="_blank" {{#equals status "2"}}onclick="return false;"{{/equals}} class="js-edit-item {{#equals status '2'}}disabled{{/equals}}">{{i18n "Edit product information" bundle="all_mix"}}</a><br>
              {{/withPerm}}
              <a href="javascript:void(0)" class="js-edit-detail {{#equals status '2'}}disabled{{/equals}}" data-id="{{id}}" data-status="{{status}}">{{i18n "Edit product details" bundle="all_mix"}}</a><br>
              {{#withPerm "item_delete"}}
                <a class="js-item-delete {{#equals status '2'}}disabled{{/equals}}"  {{#equals status '2'}}{{else}}data-toggle="confirm" data-title="{{i18n "Are you sure to delete it?" bundle="all_mix"}}" data-content="{{i18n "Cannot be restored after deleting, confirm delete?" bundle="all_mix"}}" data-event="confirm:delete-one"{{/equals}} >{{i18n "Delete" bundle="all_mix"}}</a>
              {{/withPerm}}
            </td>
          </tr>
          {{/each}}
        </tbody>
        <tfoot>
          <tr>
            <td colspan="2">
              {{#withPerm "item_delete"}}
                <button class="btn btn-medium btn-secondary js-item-batch-delete" data-toggle="confirm" data-title="{{i18n "Are you sure to delete it?" bundle="all_mix"}}" data-content="{{i18n "Cannot be restored after deleting, confirm delete?" bundle="all_mix"}}" data-event="confirm:batch-delete" disabled>{{i18n "Batch delete" bundle="all_mix"}}</button>
              {{/withPerm}}
              {{#withPerm "item_status_update"}}
                {{#equals status "1"}}<button class="btn btn-medium btn-ghost js-item-batch-off">{{i18n "Batch offline/unlist " bundle="all_mix"}}</button>
                {{else}} <button class="btn btn-medium btn-ghost js-item-batch-on">{{i18n "Batch online/listing " bundle="all_mix"}}</button>{{/equals}}
              {{/withPerm}}
            </td>
            <td colspan="6" class="td-operation"><div class="item-pagination" data-total="{{_DATA_.total}}" data-size="{{#if pageSize ~}}{{pageSize}}{{else}}20{{~/if}}"></div></td>
          </tr>
        </tfoot>
      </table>
    </div>
  </div>
{{/component}}
